/**
 * @fileoverview Google Sheets Smart Notifications - New Record Detector
 * –î–µ—Ç–µ–∫—Ç–æ—Ä –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π –≤ Google –¢–∞–±–ª–∏—Ü–∞—Ö (–ª–∏—Å—Ç "–ó–∞—è–≤–∫–∏")
 * –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ main.js onEdit —Ç—Ä–∏–≥–≥–µ—Ä–∞
 *
 * @author hawkxdev
 * @version 1.0
 * @since 2025-06-01
 */

/**
 * –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞ –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π
 * –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Å—Ç—Ä–æ–∫
 * @param {Object} event - –û–±—ä–µ–∫—Ç —Å–æ–±—ã—Ç–∏—è –æ—Ç Google Apps Script onEdit —Ç—Ä–∏–≥–≥–µ—Ä–∞
 */
function detectNewRecord(event) {
    try {
        // –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏—è
        if (!event?.range) {
            console.log("detectNewRecord: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ–±—ä–µ–∫—Ç event");
            return;
        }

        const range = event.range;
        const sheet = range.getSheet();

        console.log(`–ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å –¥–ª—è —è—á–µ–π–∫–∏ ${range.getA1Notation()} –Ω–∞ –ª–∏—Å—Ç–µ "${sheet.getName()}"`);

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å
        if (!isNewRecord(event)) {
            console.log("–≠—Ç–æ –Ω–µ –Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ");
            return;
        }

        // –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏
        const recordData = extractNewRecordData(sheet, range.getRow());

        // –í–∞–ª–∏–¥–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
        if (!validateRecordData(recordData)) {
            console.log("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è");
            return;
        }

        console.log("–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å:", recordData);

        // –°–æ–∑–¥–∞–µ–º –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        createNewRecordNotification(recordData);

    } catch (error) {
        console.error("–û—à–∏–±–∫–∞ –≤ detectNewRecord:", error);
    }
}

/**
 * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–æ–±—ã—Ç–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏
 * @param {Object} event - –û–±—ä–µ–∫—Ç —Å–æ–±—ã—Ç–∏—è –æ—Ç Google Apps Script
 * @return {boolean} true –µ—Å–ª–∏ —ç—Ç–æ –Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å
 */
function isNewRecord(event) {
    const range = event.range;
    const sheet = range.getSheet();
    const sheetName = sheet.getName();

    // –†–∞–±–æ—Ç–∞–µ–º —Ç–æ–ª—å–∫–æ —Å –ª–∏—Å—Ç–æ–º "–ó–∞—è–≤–∫–∏"
    if (sheetName !== "–ó–∞—è–≤–∫–∏") {
        console.log(`–õ–∏—Å—Ç "${sheetName}" –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –¥–ª—è –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π`);
        return false;
    }

    // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏ (–ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞)
    const rowIndex = range.getRow();
    if (rowIndex <= 1) {
        console.log("–ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö");
        return false;
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤ —è—á–µ–π–∫–µ –ø–æ—è–≤–∏–ª–∏—Å—å –¥–∞–Ω–Ω—ã–µ (–Ω–µ –ø—É—Å—Ç–∞—è)
    const cellValue = range.getValue();
    if (!cellValue || cellValue.toString().trim() === '') {
        console.log("–Ø—á–µ–π–∫–∞ –ø—É—Å—Ç–∞—è, –Ω–µ —Å—á–∏—Ç–∞–µ–º –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å—å—é");
        return false;
    }

    // üî• –£–õ–£–ß–®–ï–ù–ù–ê–Ø –õ–û–ì–ò–ö–ê:
    
    // 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —ç—Ç–æ –∫–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ –¥–ª—è –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π
    const columnIndex = range.getColumn();
    const keyColumns = [1, 2, 3, 5]; // –î–∞—Ç–∞, –í—Ä–µ–º—è, –ö–ª–∏–µ–Ω—Ç, –£—Å–ª—É–≥–∞ (–æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –Ω–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫)
    
    if (keyColumns.indexOf(columnIndex) === -1) {
    console.log(`–°—Ç–æ–ª–±–µ—Ü ${columnIndex} –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∫–ª—é—á–µ–≤—ã–º –¥–ª—è –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π`);
    return false;
    }

    // 2. –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —è—á–µ–µ–∫ –≤ —Å—Ç—Ä–æ–∫–µ
    const rowData = sheet.getRange(rowIndex, 1, 1, 6).getValues()[0];
    const filledCells = rowData.filter(cell => 
    cell && cell.toString().trim() !== ''
    ).length;

    console.log(`–°—Ç—Ä–æ–∫–∞ ${rowIndex}: –∑–∞–ø–æ–ª–Ω–µ–Ω–æ ${filledCells} –∏–∑ 6 —è—á–µ–µ–∫`);

    // üéØ –õ–û–ì–ò–ö–ê: –£–≤–µ–¥–æ–º–ª—è–µ–º –¢–û–õ–¨–ö–û –ø—Ä–∏ –≤–≤–æ–¥–µ –ö–õ–ò–ï–ù–¢–ê (—Å—Ç–æ–ª–±–µ—Ü 3)
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —ç—Ç–æ –∏–º–µ–Ω–Ω–æ —Å—Ç–æ–ª–±–µ—Ü "–ö–ª–∏–µ–Ω—Ç" (C)
    if (columnIndex !== 3) {
        console.log(`–°—Ç–æ–ª–±–µ—Ü ${columnIndex} –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø–æ–ª–µ–º "–ö–ª–∏–µ–Ω—Ç" - –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ`);
        return false;
    }
    
    // –ï—Å–ª–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–ª–µ "–ö–ª–∏–µ–Ω—Ç" - —ç—Ç–æ –Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å (–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥—Ä—É–≥–∏—Ö —è—á–µ–µ–∫)
    console.log(`–ù–∞–π–¥–µ–Ω–∞ –Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å –≤ —Å—Ç—Ä–æ–∫–µ ${rowIndex} - –∑–∞–ø–æ–ª–Ω–µ–Ω –ö–ª–∏–µ–Ω—Ç (${filledCells} —è—á–µ–µ–∫ –≤ —Å—Ç—Ä–æ–∫–µ)`);
    return true;
    
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –º–∞—Å—Å–æ–≤–æ–π –≤—Å—Ç–∞–≤–∫–∏ (Ctrl+C/Ctrl+V) - —É–∂–µ –Ω–µ –Ω—É–∂–Ω–∞
}

/**
 * –ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
 * @param {GoogleAppsScript.Spreadsheet.Sheet} sheet - –õ–∏—Å—Ç Google –¢–∞–±–ª–∏—Ü—ã
 * @param {number} rowIndex - –ò–Ω–¥–µ–∫—Å —Å—Ç—Ä–æ–∫–∏ (1-based)
 * @return {Object} –û–±—ä–µ–∫—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –∑–∞–ø–∏—Å–∏
 */
function extractNewRecordData(sheet, rowIndex) {
    try {
        // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (6 —Å—Ç–æ–ª–±—Ü–æ–≤: A-F)
        const rowData = sheet.getRange(rowIndex, 1, 1, 6).getValues()[0];

        // –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ —Å—Ç–æ–ª–±—Ü–∞–º —Å–æ–≥–ª–∞—Å–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ª–∏—Å—Ç–∞ "–ó–∞—è–≤–∫–∏"
        const recordData = {
            row: rowIndex,
            sheet: sheet.getName(),
            timestamp: new Date(),
            // –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è
            date: rowData[0] || '', // A: –î–∞—Ç–∞
            time: rowData[1] || '', // B: –í—Ä–µ–º—è
            client: rowData[2] || '', // C: –ö–ª–∏–µ–Ω—Ç
            email: rowData[3] || '', // D: Email
            service: rowData[4] || '', // E: –£—Å–ª—É–≥–∞
            budget: rowData[5] || '', // F: –ë—é–¥–∂–µ—Ç
        };

        // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –≤—Ä–µ–º—è –µ—Å–ª–∏ —ç—Ç–æ —á–∏—Å–ª–æ (Google Sheets –≤—Ä–µ–º—è)
        if (typeof recordData.time === 'number') {
            // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —á–∏—Å–ª–æ –≤ —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏
            const hours = Math.floor(recordData.time * 24);
            const minutes = Math.floor((recordData.time * 24 * 60) % 60);
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å–ø–æ—Å–æ–± –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤–µ–¥—É—â–∏—Ö –Ω—É–ª–µ–π
            const hoursStr = hours < 10 ? '0' + hours : hours.toString();
            const minutesStr = minutes < 10 ? '0' + minutes : minutes.toString();
            recordData.time = hoursStr + ':' + minutesStr;
        }

        return recordData;

    } catch (error) {
        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–∏:", error);
        return null;
    }
}

/**
 * –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
 * @param {Object} recordData - –î–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏
 * @return {boolean} true –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ
 */
function validateRecordData(recordData) {
    if (!recordData) {
        return false;
    }

    // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è: –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω –∫–ª–∏–µ–Ω—Ç –ò–õ–ò —É—Å–ª—É–≥–∞
    const hasClient = recordData.client && recordData.client.toString().trim() !== '';
    const hasService = recordData.service && recordData.service.toString().trim() !== '';

    if (!hasClient && !hasService) {
        console.log("–ó–∞–ø–∏—Å—å –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∏ –∫–ª–∏–µ–Ω—Ç–∞, –Ω–∏ —É—Å–ª—É–≥–∏ - –ø—Ä–æ–ø—É—Å–∫–∞–µ–º");
        return false;
    }

    return true;
}

/**
 * –°–æ–∑–¥–∞–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏
 * @param {Object} recordData - –î–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏
 */
function createNewRecordNotification(recordData) {
    try {
        // –§–æ—Ä–º–∏—Ä—É–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        let message = `üÜï *–ù–û–í–ê–Ø –ó–ê–Ø–í–ö–ê!*\n\n`;

        // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—è –µ—Å–ª–∏ –æ–Ω–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
        if (recordData.date) {
            message += `üìÖ *–î–∞—Ç–∞:* ${recordData.date}\n`;
        }

        if (recordData.time) {
            message += `‚è∞ *–í—Ä–µ–º—è:* ${recordData.time}\n`;
        }

        if (recordData.client) {
            message += `üë§ *–ö–ª–∏–µ–Ω—Ç:* ${recordData.client}\n`;
        }

        if (recordData.email) {
            message += `üìß *Email:* ${recordData.email}\n`;
        }

        if (recordData.service) {
            message += `üíº *–£—Å–ª—É–≥–∞:* ${recordData.service}\n`;
        }

        if (recordData.budget) {
            message += `üí∞ *–ë—é–¥–∂–µ—Ç:* ${recordData.budget}\n`;
        }

        // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Ö–Ω–∏—á–µ—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
        message += `\nüìã *–°—Ç—Ä–æ–∫–∞:* ${recordData.row}\n`;
        message += `üìä *–õ–∏—Å—Ç:* ${recordData.sheet}\n`;
        message += `‚è∞ *–ü–æ–ª—É—á–µ–Ω–æ:* ${formatTimestamp(recordData.timestamp)}`;

        console.log("–û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏:", message);

        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram
        sendTelegramMessage(message);

    } catch (error) {
        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏:", error);
    }
}

/**
 * –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ (–¥–ª—è –±—É–¥—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
 * @param {GoogleAppsScript.Spreadsheet.Sheet} sheet - –õ–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
 * @param {number} lastKnownRow - –ü–æ—Å–ª–µ–¥–Ω—è—è –∏–∑–≤–µ—Å—Ç–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
 * @return {Array} –ú–∞—Å—Å–∏–≤ –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π
 */
function getNewRecordsSince(sheet, lastKnownRow) {
    try {
        const currentLastRow = sheet.getLastRow();

        if (currentLastRow <= lastKnownRow) {
            return [];
        }

        const newRows = [];
        for (let row = lastKnownRow + 1; row <= currentLastRow; row++) {
            const recordData = extractNewRecordData(sheet, row);
            if (validateRecordData(recordData)) {
                newRows.push(recordData);
            }
        }

        return newRows;

    } catch (error) {
        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π:", error);
        return [];
    }
}

/**
 * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞ –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π –∏–∑ –ª–∏—Å—Ç–∞ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
 * @return {boolean} true –µ—Å–ª–∏ –¥–µ—Ç–µ–∫—Ç–æ—Ä –≤–∫–ª—é—á–µ–Ω
 */
function isNewRecordDetectorEnabled() {
    try {
        const ss = SpreadsheetApp.getActiveSpreadsheet();
        const settingsSheet = ss.getSheetByName("–ù–∞—Å—Ç—Ä–æ–π–∫–∏");

        if (!settingsSheet) {
            console.log("–õ–∏—Å—Ç '–ù–∞—Å—Ç—Ä–æ–π–∫–∏' –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: true");
            return true;
        }

        // –ò—â–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä ENABLE_NEW_RECORDS –≤ –∫–æ–ª–æ–Ω–∫–µ A
        const settingsData = settingsSheet.getRange("A:B").getValues();

        for (const row of settingsData) {
            if (row[0] === "ENABLE_NEW_RECORDS") {
                const value = row[1];
                return value === true || value === "TRUE" || value === "true";
            }
        }

        // –ï—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–∞–µ–º
        console.log("–ü–∞—Ä–∞–º–µ—Ç—Ä ENABLE_NEW_RECORDS –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: true");
        return true;

    } catch (error) {
        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞:", error);
        return true; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–∞–µ–º –ø—Ä–∏ –æ—à–∏–±–∫–µ
    }
}
